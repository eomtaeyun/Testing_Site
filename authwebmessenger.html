<!DOCTYPE html>

<script type="text/javascript" charset="utf-8">
  (function (g, e, n, es, ys) {
    g['_genesysJs'] = e;
    g[e] = g[e] || function () {
      (g[e].q = g[e].q || []).push(arguments)
    };
    g[e].t = 1 * new Date();
    g[e].c = es;
    ys = document.createElement('script'); ys.async = 1; ys.src = n; ys.charset = 'utf-8'; document.head.appendChild(ys);
  })(window, 'Genesys', 'https://apps.usw2.pure.cloud/genesys-bootstrap/genesys.min.js', {
    environment: 'usw2',
    deploymentId: 'b725e90b-7565-4d21-b0a5-a34579777cef',
    debug: true // optional - Enables Genesys browser console logging
  });
  
</script>


<p>Genesys Cloud WebChat test page</p>
<li> <a href="https://path-e-tech.netlify.app/webmessenger.html">Web Messenger Netlify</a> </li>
<li> <a href="https://rydev-genesys.github.io/webmessenger.html">Web Messenger Github</a> </li>

<head lang="en">

<script type="text/javascript" charset="utf-8"></script>

  Genesys('registerPlugin', 'AuthProvider', (AuthProvider) => {

    // COMMAND
    // *********
    // getAuthCode
    // reAuthenticate
  
    /* Register Command - mandatory */
  
    AuthProvider.registerCommand('getAuthCode', (e) => {
  
    // Add the necessary logic and resolve with the authCode and redirectUri provided by your Authentication provider. Messenger will call this command to get the the tokens.
  
    e.resolve({
      authCode: <brand auth code>,       // pass your authorization code here
      redirectUri: <your redirect uri>,  // pass the redirection URI configured in your Authentication provider here
      nonce: <your nonce>,               // pass the random string preferably in uuid format. Applicable for OKTA provider.
      maxAge: <your maxAge>,             // pass elapsed time in seconds. Applicable for OKTA provider and it is an optional parameter.
      codeVerifier: <your code verifier> // pass your code verifier here when PKCE flow is enabled
      iss: <your iss>,                   // pass your iss here. It is an optional parameter provided in the authorization response by your Authentication provider.
    });
    });
  
    AuthProvider.registerCommand('reAuthenticate', (e) => {
      
    // Messenger will call this command when current refreshToken and/or authCode are no more valid. Brand can add logic here to simply re-login and resolve this command after successful login so that Messenger can get the new authCode. (In case when browser needs to reload for a login, there is no need to resolve this command). Note: After a successful re-login, calling the getAuthCode command is taken care internally and there is no need to call it explicitly again.
  
    document.getElementById('myLoginButton').click(); // simulate the login button click
    e.resolve();
    });
  
    /* Subscribe to Auth plugin events */
  
     AuthProvider.subscribe('Auth.loggedOut', () => {
       // This event is published across the browser tabs/devices where the user is logged in, so you can do something on logout.
        // For example, clear any authenticated flags that you might have set during login.
     });
  
    /* Subscribe to Auth plugin events - optional */
  
    AuthProvider.subscribe('Auth.authError', (error) => {
  
      // This event is published across the browser tabs/devices where the user is logged in, so you can do something on logout.
      // For example, clear any authenticated flags that you might have set during login.
    });
  
   /* Click Handlers */
  
    // Handle logout
    document.getElementById('myButton').onclick = function () {
  
      AuthProvider.command('Auth.logout').then(() => {
        // Do something on logout.
      // For example, clear any authenticated flags that you might have set on login
      });
    };
  
    // Tell Messenger that your plugin is ready (mandatory)
    AuthProvider.ready();
  });
</script>

</head>
<body>


<!-- EXTRA SETUP FROM SDK FOR WEB MESSENGER
  <script type="text/javascript" charset="utf-8">
    Genesys("subscribe", "Launcher.ready", function() {
                console.log("Launcher ready");
                });
//https://developer.genesys.cloud/commdigital/digital/webmessaging/messengersdk/SDKCommandsEvents/launcherPlugin#launcher-ready
                Genesys("subscribe", "Messenger.ready", function() {
                console.log("Messenger ready");
                setTimeout(function(){Genesys("command", "Messenger.open");},1000);
                });
//https://developer.genesys.cloud/commdigital/digital/webmessaging/messengersdk/SDKCommandsEvents/messengerPlugin#messenger-ready
                Genesys("subscribe", "Conversations.ready", function() {
                console.log("Conversations ready");
//https://developer.genesys.cloud/commdigital/digital/webmessaging/messengersdk/SDKCommandsEvents/conversationsPlugin#conversations-ready 				
                });
    </script>
-->

<!-- EXTRA SETUP FROM SDK FOR WEB MESSENGER
  <script type="text/javascript" charset="utf-8">
      Genesys("command", "Database.set", { 
        messaging: {
           customAttributes: {
             key: 'value' 
            }
          }
        }
        );

  </script>
-->   

<!-- EXTRA SETUP FROM SDK FOR WEB MESSENGER
  <script type="text/javascript" charset="utf-8">
    Genesys("command", "Database.get", { 
      name: "messaging.customAttributes"},
      function (e){
        console.log(e)}
    );
  </script>
-->   

</body>
</html>
